<!-- Generated By: Cursor (Claude Sonnet 4.5) -->
# Metrics Utility

[![Test](https://github.com/jewzaam/metrics-utility/workflows/Test/badge.svg)](https://github.com/jewzaam/metrics-utility/actions/workflows/test.yml)
[![Coverage](https://github.com/jewzaam/metrics-utility/workflows/Coverage%20Check/badge.svg)](https://github.com/jewzaam/metrics-utility/actions/workflows/coverage.yml)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Code style: ruff](https://img.shields.io/badge/code%20style-ruff-000000.svg)](https://github.com/astral-sh/ruff)

A simple Prometheus metrics utility library for Python. This library provides a clean, Pythonic interface for creating and managing Prometheus metrics with automatic label enrichment and file watching capabilities.

## Quick Start

### Development
```bash
git clone https://github.com/jewzaam/metrics-utility
cd metrics-utility
make test
```

### Release
```bash
# Update version in pyproject.toml, commit and push
make release
```

### Use in Other Projects
Add to `requirements.txt`:
```txt
metrics-utility @ git+https://github.com/jewzaam/metrics-utility.git@v0.1.0
```

```python
import metrics_utility
metrics_utility.metrics(8000)
metrics_utility.set("my_metric", 42.0, {"env": "prod"})
```

## ðŸš€ Features

- **Simple API**: Easy-to-use functions for gauges and counters
- **Automatic Label Enrichment**: Automatically adds host labels to metrics
- **File Watching**: Monitor log files and directories for changes
- **Thread-Safe**: Uses locks to safely create metrics from multiple threads
- **Modern Python**: Type hints, proper packaging, and modern tooling
- **Disconnected Environment Support**: Distribute as wheel files for offline installation

## Make Targets

```bash
make help      # Show all targets
make test      # Run tests
make coverage  # Run tests with coverage report
make lint      # Run linting and type checking
make format    # Format code
make build     # Build wheel for distribution
make release   # Create and push release tag
make clean     # Remove temporary files
```

## API

```python
import metrics_utility

# Start metrics HTTP server
metrics_utility.metrics(port=8000)

# Set a gauge
metrics_utility.set("my_gauge", 42.0, {"service": "api"})

# Add to a gauge
metrics_utility.add("my_gauge", 10.0, {"service": "api"})

# Increment a counter
metrics_utility.inc("my_counter", {"service": "api"})

# Decrement (uses gauge, not counter)
metrics_utility.dec("my_metric", {"service": "api"})
```



